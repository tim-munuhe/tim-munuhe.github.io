<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Basic Python with Darcy’s Law - User-Defined Parameters" /><meta name="author" content="Timothy W. Munuhe, Ph.D." /><meta property="og:locale" content="en_US" /><meta name="description" content="Read parameters for Darcy’s Law from a CSV file." /><meta property="og:description" content="Read parameters for Darcy’s Law from a CSV file." /><link rel="canonical" href="tim-munuhe.github.io/2021/05/01/csv-read-parameters" /><meta property="og:url" content="tim-munuhe.github.io/2021/05/01/csv-read-parameters" /><meta property="og:site_name" content="tim-munuhe" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-01T00:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Basic Python with Darcy’s Law - User-Defined Parameters" /><meta name="twitter:site" content="@tim_munuhe" /><meta name="twitter:creator" content="@tim_munuhe" /> <script type="application/ld+json"> {"description":"Read parameters for Darcy’s Law from a CSV file.","headline":"Basic Python with Darcy’s Law - User-Defined Parameters","dateModified":"2021-05-01T00:00:00-04:00","datePublished":"2021-05-01T00:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"tim-munuhe.github.io/2021/05/01/csv-read-parameters"},"url":"tim-munuhe.github.io/2021/05/01/csv-read-parameters","author":{"@type":"Person","name":"Timothy W. Munuhe, Ph.D."},"@type":"BlogPosting","@context":"https://schema.org"}</script><title> Basic Python with Darcy&#39;s Law - User-Defined Parameters - tim-munuhe</title><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="tim-munuhe" href="/atom.xml"><link rel="alternate" type="application/json" title="tim-munuhe" href="tim-munuhe.github.io/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui, sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}</style></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">tim-munuhe</h1>--><nav role="navigation"><ul><li><a href="/" >Posts</a></li><li><a href="/about" >About</a></li><li><a href="/search" >Search</a></li><li><a href="/atom.xml" >Rss</a></li></ul></nav></header><section class="post"><h2>Basic Python with Darcy's Law - User-Defined Parameters</h2><p>In the previous blog post, I introduced some object-oriented Python by creating a parameter class that initialized a solution to Darcy's law for some default fluid and porous medium. So, just by creating the case, we were done. Now, we want to feed our own properties into Darcy's Law.</p><p>Let's start with the (easier) parameter problem: we can feed in our own fluid and porous medium properties by adding to the instantiation’s input. Currently, we just have <code class="language-python">(self)</code> for the initialization. Let's add the length of the porous medium:</p><pre><code class="language-python">class case_param(): <br />    def __init__(self,L): <br />        self.dim = 1 # dimensions <br />        self.x0 = 0.0 # inlet position <br />        self.xL = self.x0 + L # outlet <br />        fluid_name = 'Water' <br />        mu = 0.001 <br />        u0 = 0.0 <br />        p0 = 0.0 # inlet pressure <br />        pL = -100.0 # outlet <br />        self.fl = {'Name': fluid_name, 'mu': mu, 'u0': u0, 'p0': p0, 'pL': pL} <br />        pm_name = 'Sand' <br />        K = 1.0E-9 <br />        eps = 0.15 <br />        self.pm = {'Name': pm_name, 'K':K, 'eps':eps} &gt;br&gt;         self.fl['u0'] = -K/mu*(pL-p0)/(self.xL-self.x0) </code> </pre><p>When we create the <code class="language-python">case_param</code> object, we need to give the length in the parentheses, like so:</p><pre><code class="language-python">base = case_param(1.0)</code></pre><p>Then, when we call the case's outlet location, we get our length:</p><pre><code class="language-python">print(base.xL) <br />&gt;&gt;&gt; 9.999999999999999e-05  </code> </pre><p>which gives us the same answer as the first blog post:</p><pre><code class="language-python">print(base.fl['u0']) <br /> &gt;&gt;&gt; 9.999999999999999e-05  </code> </pre><p>We could keep going this way but we have at least 8 parameters for our case that we'd want to vary: the fluid name, viscosity, inlet and outlet pressure, porous medium name, permeability, porosity, and the length of the domain. Instead, we can use text files or CSV files with specified formats to feed in the case parameters, allowing a more streamlined multi-case process. Let's use CSV: we can create it in Excel and it’s use in Python for Data Science means there will be resources for troublshooting later (;-)).</p><p>First, import the <code class="language-python">CSV</code> package:</p><pre><code class="language-python">import csv  </code> </pre><p>Next, let’s create our CSV case file using Excel:</p><table><thead><tr><th>case_name</th><th>fluid</th><th>p0</th><th>pL</th><th>mu</th><th>porous_medium</th><th>length</th><th>K</th><th>eps</th></tr></thead><tbody><tr><td>base</td><td>water</td><td>0.000</td><td>-100.000</td><td>0.001</td><td>sand</td><td>1.000</td><td>1.00E-09</td><td>0.150</td></tr><tr><td>long</td><td>water</td><td>0.000</td><td>-100.000</td><td>0.001</td><td>sand</td><td>2.000</td><td>1.00E-09</td><td>0.150</td></tr><tr><td>press</td><td>water</td><td>100.000</td><td>-100.000</td><td>0.001</td><td>sand</td><td>1.000</td><td>1.00E-09</td><td>0.150</td></tr><tr><td>powder</td><td>water</td><td>0.000</td><td>-100.000</td><td>0.001</td><td>powder</td><td>1.000</td><td>1.00E-11</td><td>0.300</td></tr><tr><td>oil</td><td>oil</td><td>0.000</td><td>-100.000</td><td>0.060</td><td>sane</td><td>1.000</td><td>1.00E-09</td><td>0.150</td></tr></tbody></table><p>We can use the <code class="language-python">csv.reader</code> function and skip the first line to create individual case parameter lists, or, we can use the <code class="language-python">csv.DictReader</code> function to construct individual case dictionaries:</p><pre><code class="language-python">with open('casefile.csv',newline='') as casefile: <br />    casereader = csv.DictReader(casefile) <br />    i = 0 <br />    caselist = {} <br />    for row in casereader:    <br />        caselist[i] = row <br />        print(row['case_name'], row['fluid'], row['mu']) # check that code works as expected <br />        i += 1 <br />&gt;&gt;&gt; base water 0.001 <br />&gt;&gt;&gt; long water 0.001 <br />&gt;&gt;&gt; press water 0.001 <br />&gt;&gt;&gt; powder water 0.001 <br />&gt;&gt;&gt; oil oil 0.060 </code> </pre><p>DictReader uses the first row of the CSV file as the keys and the subsequent row values are the dictionary entries. The only problem is that all entries are read as strings, which must convert the number variables to floats in the &lt;pre&gt;<code class="language-python">case_param</code> &lt;/pre&gt; instantiation:</p><pre><code class="language-python">class case_param(): <br />    def __init__(self,param): <br />        self.name = param['case_name'] # now the name is given inside the case, not as the case's actual name <br />        self.dim = 1 # dimensions <br />        self.x0 = 0.0 # inlet position <br />        self.xL = self.x0 + float(param['length']) # outlet <br />        fluid_name = param['fluid'] <br />        mu = float(param['mu']) <br />        u0 = 0.0 <br />        p0 = float(param['p0']) # inlet pressure <br />        pL = float(param['pL']) # outlet <br />        self.fl = {'Name': fluid_name, 'mu': mu, 'u0': u0, 'p0': p0, 'pL': pL} <br />        pm_name = param['porous_medium']  <br />        K = float(param['K']) <br />        eps = float(param['eps']) <br />        self.pm = {'Name': pm_name, 'K':K, 'eps':eps} <br />         self.fl['u0'] = -K/mu*(pL-p0)/(self.xL-self.x0) </code> </pre><p>We can initialize the original base case and the oil case and compare the velocities:</p><pre><code class="language-python"> base = case_param(caselist[0]) <br /> oil = case_param(caselist[4]) <br /> print(base.fl['u0'] <br /> &gt;&gt;&gt; 9.999999999999999e-05 <br /> print(oil.fl['u0'] <br /> &gt;&gt;&gt; 1.6666666666666667e-06 </code> </pre><p>We can see that the viscous oil slows down the flow, as expected. We haven’t changed the Darcy's Law calculation so we know, at least, that the code is reading the CSV file correctly and initializing the case properly.</p><p>The next step is to see what is going on between the inlet and outlet, specifically with the pressure.</p><span class="meta"><time datetime="2021-05-01T00:00:00-04:00">May 1, 2021</time> &middot; </span></section></main></body></html>
